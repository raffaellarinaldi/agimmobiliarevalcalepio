(()=>{let a="api",D="click",A="{data-id}",i="accept",r="reject",x="c-h-n",o="c-h-b",t="show-ph",l,T,c,s,d={},v={},n={},f={},L="",m={},u=[],p=new Map,y=a,R=["onload","onerror","src","params"],h=e=>"function"==typeof e,_=e=>"string"==typeof e,k=e=>T.createElement(e),E=()=>k("div"),I=()=>{var e=k("button");return e.type="button",e},$=(e,t)=>e.className=t,j=(e,t)=>e.classList.add(t),C=(e,t)=>e.appendChild(t),g=e=>e&&Object.keys(e)||[],b=(e,t)=>{for(var a in t)U(e,a,t[a])},N=(e,a)=>{let i=d[e];if("IntersectionObserver"in l){var r=e;n[r]=new IntersectionObserver(e=>{for(var t of e)t.isIntersecting&&(((e,a)=>{const t=e=>{a.h.style.backgroundImage=`url('${e}')`;const t=new Image;t.onload=()=>j(a.h,"loaded"),t.src=e};if(_(a.i))""!==a.i&&t(a.i);else if(h(e))e(a.t,e=>t(e));else if(_(e)){const i=e.replace(A,a.t);t(i)}})(a,i[t.target.dataset.index]),n[r].unobserve(t.target))});for(let e of i)n[r].observe(e.v)}},M=(i,r)=>{if(!i._){if(i._=!0,i.m){let e=i.p.cloneNode(!0);i.m.replaceWith(e),i.m=e}let a=r.iframe;if(h(r.onAccept))r.onAccept(i.v,e=>{if(!(e instanceof HTMLIFrameElement))return!1;b(e,a),b(e,i.P),i.D=e,i._=!0,j(i.v,o),i.I&&!i.T||j(i.v,t)});else{i.D=k("iframe");var n=r.iframe,n=i.l||n&&n.params;let e=r.embedUrl||"",t=(e=h(e)?String(e()):e).replace(A,i.t);i.o&&(i.D.title=i.o),n&&_(n)&&(t+="?"===n.slice(0,1)?n:"?"+n),i.D.onload=()=>{j(i.v,o),i.D.onload=void 0,h(a&&a.onload)&&a.onload(i.t,i.D)},b(i.D,a),b(i.D,i.P),i.D.src=t,C(i.u,i.D)}}},U=(e,t,a)=>{R.includes(t)||e.setAttribute(t,a)},P=e=>{j(e.v,x),e.S=!1},w=e=>{e.v.classList.remove(x,o,t),e.S=!0},S=e=>(e=T.cookie.match(`(^|;)\\s*${e}\\s*=\\s*([^;]+)`))?e.pop():"",q=(g,b,w)=>{let e=d[g],S=b.languages;e.forEach(e=>{if(!e.$&&S){var a=S[L],i=a&&a.loadBtn,r=a&&(a.notice||"").replace(A,e.t),a=a&&a.loadAllBtn,n=T.createElement("div"),o=E(),l=E(),c=E(),s=E();$(n,"cll"),e.u=n;let t=()=>{P(e),M(e,b)};if(i){let e=I();e.textContent=i,$(e,"c-l-b"),e.addEventListener(D,t),C(s,e)}if(a){let e=I();e.textContent=a,$(e,i?"c-la-b":"c-l-b"),e.addEventListener(D,()=>{t(),y=D,J.acceptService(g)}),C(s,e)}var d=E(),v=E(),f=E(),m=E(),u=E(),p=($(d,"cc-text"),$(m,"c-bg-i"),e.h=m,$(f,"c-ld"),_(e.i)&&""===e.i||$(v,"c-bg"),e.o),h=T.createDocumentFragment();if(p){let e=k("span");$(e,"c-tl"),e.insertAdjacentHTML("beforeend",p),C(h,e)}C(d,h),o&&d.insertAdjacentHTML("beforeend",r||""),C(l,d),$(u,"c-t-cn"),$(l,"c-n-t"),$(c,"c-n-c"),$(o,"c-nt"),$(s,"c-n-a"),C(u,l),(i||a)&&C(u,s),C(c,u),C(o,c),C(v,m),C(n,o),(b.thumbnailUrl||e.i)&&C(n,v),C(n,f),w&&j(e.v,x),e.v.prepend(n),e.$=!0,setTimeout(()=>j(e.v,"c-an"),20)}})},H=(t,n)=>{let o=d[t];o.forEach(e=>{var r;e._||(e=e.v,r=t,v[r]||(v[r]=new IntersectionObserver(i=>{if(f[r])v[r].disconnect();else for(let e=0;e<i.length;++e)i[e].isIntersecting&&(e=>{let t=i[e].target,a=t.dataset.index;M(o[a],n),setTimeout(()=>{P(o[a])},50*e),v[r].unobserve(t)})(e)})),v[r].observe(e))})},B=(e,t)=>e in t?e:0<g(t).length?L in t?L:g(t)[0]:void 0,F=(e,t)=>{var a=t.cookie;if(!S(a.name)){var{hostname:i,protocol:r}=location,n=a.name,o=new Date,l=a.path||"/",c=864e5*(a.expiration||182),s=a.sameSite||"Lax",a=a.domain||i;o.setTime(o.getTime()+c);let e=n+"=1"+(0!=c?"; Expires="+o.toUTCString():"")+"; Path="+l+"; SameSite="+s;-1<a.indexOf(".")&&(e+="; Domain="+a),"https:"===r&&(e+="; Secure"),T.cookie=e}H(e,t)},G=(e,t)=>{var a,i=t.cookie;S(i.name)&&(r=i.name,a=i.path||"/",i=i.domain||location.hostname,T.cookie=r+`=; Path=${a}; Domain=${i}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`);{var r=e,n=t;let a=d[r];for(let e=0;e<a.length;e++)(e=>{var t;a[e]._&&(h(n.onReject)?(n.onReject(a[e].D,a[e].v,()=>w(a[e])),a[e]._=!1):((t=a[e]).D&&t.D.remove(),t._=!1)),w(a[e])})(e)}},O=(e,t,a)=>{h(s)&&s({eventSource:{type:y,service:e,action:t},changedServices:a})},J={acceptService:e=>{var t=[];if("all"===e){for(let e of u)f[e]=!1,p.get(e)||(p.set(e,!0),F(e,m[e]),t.push(e));0<t.length&&O(e,i,t)}else u.includes(e)&&(f[e]=!1,p.get(e)||(p.set(e,!0),F(e,m[e]),t.push(e),O(e,i,t)));y=a},rejectService:e=>{var t=[];if("all"===e){for(let e of u)f[e]=!0,G(e,m[e]),p.get(e)&&(p.set(e,!1),t.push(e));0<t.length&&O(e,r,t)}else u.includes(e)&&(f[e]=!0,G(e,m[e]),p.get(e))&&(p.set(e,!1),t.push(e),O(e,r,t))},childExists:async({parent:e=l,childProperty:t,childSelector:a="iframe",timeout:i=1e3,maxTimeout:r=15e3})=>{let n=1,o=t?()=>e[t]:()=>e.querySelector(a);return new Promise(e=>{let t=()=>{if(o()||n++*i>r)return e(void 0!==o());setTimeout(t,i)};t()})},getState:()=>({services:new Map(p),acceptedServices:[...p].filter(([,e])=>!!e).map(([e])=>e)}),getConfig:()=>c,reset:e=>{if(e)for(let t of u)for(let e of d[t])(e=>{if(e.hasAttribute("data-service")){e.removeAttribute("class"),e.removeAttribute("data-index");for(var t of e.children)t.hasAttribute("data-placeholder")||t.remove()}})(e.v);for(var t of u)v[t]?.disconnect(),n[t]?.disconnect(),delete v[t],delete n[t];v={},n={},f={},l=void 0,T=void 0,c=void 0,s=void 0,d={},L="",m={},u=[],p=new Map,y=a,window._imRun=!1},run:e=>{if(!window._imRun&&(T=document,l=window,c=e,m=c.services,s=c.onChange,0!==(u=g(m)).length)){L=c.currLang;let e=m[u[0]].languages;!0===c.autoLang?L=B(navigator.language.slice(0,2).toLowerCase(),e):_(c.currLang)&&(L=B(c.currLang,e));for(var r of u){let e=m[r],t=e.cookie=e.cookie||{},a=t.name=t.name||"im_"+r,i=S(a);p.set(r,!!i),d[r]=[];var n=T.querySelectorAll(`div[data-service="${r}"]`),o=n.length;if(0!==o){for(let e=0;e<o;e++)n[e].dataset.index=e,d[r].push((e=>{let t=e.dataset,a={},i="data-iframe-",r=e.getAttributeNames().filter(e=>e.slice(0,12)===i).map(e=>e.slice(12)),n=e.querySelector("[data-placeholder]"),o=n&&n.hasAttribute("data-visible");o&&n.removeAttribute("data-visible");var l,c=n&&n.cloneNode(!0);for(l of r)a[l]=e.getAttribute(i+l);return{t:t.id,o:t.title,i:t.thumbnail,l:t.params,v:e,u:null,m:n,p:c,h:null,_:!1,$:!1,S:!0,T:"widget"in t,I:o,P:a}})(n[e]));i?(q(r,e,!0),H(r,e)):q(r,e,!1),N(r,e.thumbnailUrl)}}window._imRun=!0}}},e="iframemanager";"undefined"==typeof window||h(window[e])||(window[e]=()=>J)})();